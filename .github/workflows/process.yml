name: Data Processing
‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ, ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶¨ ‡¶õ‡ßã‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ü‡¶ø ‡¶∏‡¶π‡¶ú‡ßá‡¶á ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§

‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ go.mod ‡¶´‡¶æ‡¶á‡¶≤‡ßá Go ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® 1.21.3 ‡¶è‡¶∞ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶Ü‡¶õ‡ßá‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶ï‡ßã‡¶°‡ßá GitHub Action-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø go-version: '1.20' ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶õ‡¶ø‡¶≤‡•§ Go 1.20 ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡¶ü‡¶ø 1.21.3 ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ü‡¶ø ‡¶ö‡¶ø‡¶®‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶®‡¶æ (‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø ‡¶§‡¶æ‡¶∞ ‡¶ö‡ßá‡ßü‡ßá ‡¶®‡¶§‡ßÅ‡¶®), ‡¶§‡¶æ‡¶á ‡¶è‡¶á ‡¶è‡¶∞‡¶∞ ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá: invalid go version '1.21.3'.

‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ .github/workflows/stream.yml ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ Go ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡¶ü‡¶ø 1.20 ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡ßú‡¶ø‡ßü‡ßá 1.22 ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶≤‡ßá‡¶á ‡¶è‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§

‡¶®‡¶ø‡¶ö‡ßá ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶ø‡¶§ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ YAML ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶° ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶è‡¶ü‡¶ø ‡¶¨‡¶∏‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶®:

‚úÖ Corrected stream.yml
YAML
name: TG Stream Node

on:
  workflow_dispatch: # ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

jobs:
  stream-job:
    runs-on: ubuntu-latest
    timeout-minutes: 350 # ‡¶™‡ßç‡¶∞‡¶æ‡ßü ‡ß¨ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Set up Go
      uses: actions/setup-go@v4
      with:
        go-version: '1.22' # ‚ö†Ô∏è ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: 1.20 ‡¶è‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá 1.22 ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá

    - name: Install Dependencies & Cloudflared
      run: |
        sudo apt-get update && sudo apt-get install -y ffmpeg
        # Cloudflared ‡¶®‡¶æ‡¶Æ‡¶æ‡¶®‡ßã
        wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64
        chmod +x cloudflared-linux-amd64
        sudo mv cloudflared-linux-amd64 /usr/local/bin/cloudflared

    - name: Clone & Build Bot
      run: |
        git clone https://github.com/affaz101/TG-FileStream bot
        cd bot
        # Go mod tidy ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶≤‡ßç‡¶°
        go mod tidy
        go build -o fsb ./cmd/fsb

    - name: Start Tunnel & Stream
      env:
        WORKER_URL: ${{ secrets.WORKER_URL }}
        WORKER_KEY: ${{ secrets.WORKER_KEY }}
      run: |
        # ‡ßß. ‡¶ü‡¶æ‡¶®‡ßá‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ
        cloudflared tunnel --url http://127.0.0.1:8080 > cf.log 2>&1 &
        echo "‚è≥ Tunnel Starting..."
        sleep 10
        
        # ‡ß®. ‡¶ü‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
        TUNNEL_URL=$(grep -o 'https://.*\.trycloudflare.com' cf.log | head -1)
        echo "üîó Tunnel URL: $TUNNEL_URL"
        
        if [ -z "$TUNNEL_URL" ]; then
          echo "‚ùå Tunnel Failed! Logs:"
          cat cf.log
          exit 1
        fi
        
        # ‡ß©. ‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        curl -s "$WORKER_URL?key=$WORKER_KEY&update=$TUNNEL_URL"
        
        # ‡ß™. ‡¶¨‡¶ü ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ (‡¶∏‡¶ø‡¶ï‡ßç‡¶∞‡ßá‡¶ü ‡¶Ü‡¶®‡¶æ‡¶∏‡¶π)
        SECRETS=$(curl -s "$WORKER_URL?key=$WORKER_KEY")
        
        # JSON ‡¶™‡¶æ‡¶∞‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø jq ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞
        export API_ID=$(echo $SECRETS | jq -r '.data.API_ID')
        export API_HASH=$(echo $SECRETS | jq -r '.data.API_HASH')
        export BOT_TOKEN=$(echo $SECRETS | jq -r '.data.BOT_TOKEN')
        export LOG_CHANNEL=$(echo $SECRETS | jq -r '.data.LOG_CHANNEL')
        export PORT=8080
        export HOST=$WORKER_URL
        
        cd bot
        ./fsb run
